`timescale 10ns / 10ns

module ad9833tb();

reg r_fakeclock, go;

reg[15:0] control;
wire[15:0] adreg0;
wire[15:0] adreg1;

reg[27:0] freq = 28'h0000000;

assign adreg0 = 16'h4000 | freq[13:0];
assign adreg1 = 16'h4000 | freq[27:14];

wire good_to_reset_go, send_complete, fsync, sclk, sdata;

initial
begin
  r_fakeclock <= 0;
  go <= 0;
  control <= 16'b1010101010101101;
end

always #1 r_fakeclock <= ~r_fakeclock;

ad9833 UUT
  (
  .clk(r_fakeclock),
  .go(go),
  .control(control),
  .adreg0(adreg0),
  .adreg1(adreg1),
  .good_to_reset_go(good_to_reset_go),
  .send_complete(send_complete),
  .fsync(fsync),
  .sclk(sclk),
  .sdata(sdata)
  );

always @(posedge r_fakeclock)
begin
  if(good_to_reset_go == 1) go <= 0;
end

initial
begin
  #10
  go <= 1;
  #1500
  go <= 1;
  #10000
  $finish;
end

endmodule
